(function(e){function n(n){for(var r,o,a=n[0],u=n[1],s=n[2],f=0,d=[];f<a.length;f++)o=a[f],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(n);while(d.length)d.shift()();return c.push.apply(c,s||[]),t()}function t(){for(var e,n=0;n<c.length;n++){for(var t=c[n],r=!0,a=1;a<t.length;a++){var u=t[a];0!==i[u]&&(r=!1)}r&&(c.splice(n--,1),e=o(o.s=t[0]))}return e}var r={},i={app:0},c=[];function o(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=r,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)o.d(t,r,function(n){return e[n]}.bind(null,r));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=n,a=a.slice();for(var s=0;s<a.length;s++)n(a[s]);var l=u;c.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"034f":function(e,n,t){"use strict";var r=t("85ec"),i=t.n(r);i.a},4136:function(e,n,t){"use strict";var r=t("ed6e"),i=t.n(r);i.a},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var r=t("2b0e"),i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[e.currentScene?t("SceneViewer"):e._e(),e.currentScene?e._e():t("div",[t("label",{staticClass:"myLabel"},[t("input",{attrs:{type:"file",required:""},on:{change:function(n){return e.createScene(n)}}}),t("span",[e._v("Create scene")])])])],1)},c=[],o=(t("b0c0"),t("d3b7"),function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("pinch-zoom",{staticClass:"wrapper"},[e.image?t("div",{staticClass:"scene-image",style:{"background-image":"url("+e.image.url+")",width:e.image.width+"px",height:e.image.height+"px"}},e._l(e.links,(function(n){return t("div",{key:n.id,staticClass:"link",style:{top:n.location_y+"px",left:n.location_x+"px"}},[t("a",{on:{click:function(t){return e.moveToScene(n.scene_to_id)}}},[e._v("link")])])})),0):e._e()]),t("div",{staticClass:"fixed-toolbar"},[e.link_back?t("button",{on:{click:function(n){return e.moveToScene(e.link_back.scene_to_id)}}},[e._v(" Takaisin ")]):e._e(),e.adminMode?t("div",[t("label",{staticClass:"myLabel"},[t("input",{attrs:{type:"file",required:""},on:{change:function(n){return e.createScene(n)}}}),t("span",[e._v("Add")])])]):e._e()])],1)}),a=[],u={name:"SceneViewer",props:{msg:String},data:function(){return{uploadedFile:{}}},computed:{currentScene:function(){return this.$store.state.currentScene},image:function(){return this.currentScene?{url:this.currentScene.image,width:this.currentScene.image_width,height:this.currentScene.image_height}:null},links:function(){return this.currentScene?this.currentScene.links:[]},adminMode:function(){return!0},link_back:function(){return this.currentScene?this.currentScene.link_back:null}},methods:{toBase64:function(e){return new Promise((function(n,t){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return n(r.result)},r.onerror=function(e){return t(e)}}))},moveToScene:function(e){var n=this;this.axios.get("/scenes/"+e).then((function(e){n.$store.commit("setCurrentScene",e.data)}))},createScene:function(e){var n=this;console.log(e);var t=e.srcElement.files[0].name;this.toBase64(e.srcElement.files[0]).then((function(e){n.uploadedFile={filename:t,file:e},document.querySelector(".scene-image").addEventListener("click",n.createLink)}))},createLink:function(e){var n=this;document.querySelector(".scene-image").removeEventListener("click",this.createLink);var t=e.x,r=e.y;console.log(e),this.axios.post("/scenes/",{filename:this.uploadedFile.filename,image:this.uploadedFile.file}).then((function(e){var i=e.data.id;n.axios.post("/scenes/".concat(n.currentScene.id,"/links/"),{location_x:t,location_y:r,scene_to_id:i}).then((function(e){n.axios.post("/scenes/".concat(i,"/links/"),{scene_to_id:n.currentScene.id,is_link_back:!0}),n.$store.commit("addLinkToCurrentScene",e.data)}))}))}}},s=u,l=(t("4136"),t("2877")),f=Object(l["a"])(s,o,a,!1,null,"25d235da",null),d=f.exports,p={name:"App",components:{SceneViewer:d},computed:{currentScene:function(){return this.$store.state.currentScene}},methods:{toBase64:function(e){return new Promise((function(n,t){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return n(r.result)},r.onerror=function(e){return t(e)}}))},createScene:function(e){var n=this;console.log(e);var t=e.srcElement.files[0].name;this.toBase64(e.srcElement.files[0]).then((function(e){n.axios.post("/scenes/",{filename:t,image:e}).then((function(e){n.$store.commit("setCurrentScene",e.data)}))}))}},mounted:function(){var e=this;this.axios.get("/scenes/1").then((function(n){e.$store.commit("setCurrentScene",n.data)}))}},h=p,m=(t("034f"),Object(l["a"])(h,i,c,!1,null,null,null)),v=m.exports,S=t("2f62"),g=t("bc3a"),_=t.n(g),b=t("2106"),k=t.n(b);r["a"].config.productionTip=!1,r["a"].config.ignoredElements=["pinch-zoom"],r["a"].use(S["a"]),r["a"].use(k.a,_.a);var y=new S["a"].Store({state:{currentScene:null,allScenes:[]},mutations:{setCurrentScene:function(e,n){e.currentScene=n},addLinkToCurrentScene:function(e,n){e.currentScene.links.push(n)}}});new r["a"]({store:y,render:function(e){return e(v)}}).$mount("#app")},"85ec":function(e,n,t){},ed6e:function(e,n,t){}});
//# sourceMappingURL=app.4b256b0d.js.map